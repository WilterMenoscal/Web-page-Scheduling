{% load static%}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Web Scheduling</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.11.7/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.11.7/css/dataTables.bootstrap5.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.5.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="{%static 'lib/AdminLTE-3.0.2/plugins/fontawesome-free/css/all.min.css' %}">
  <!-- fullCalendar -->
  <link rel="stylesheet" href="{%static 'lib/AdminLTE-3.0.2/plugins/fullcalendar/main.css'%}">
  <!-- Theme style -->
  <link rel="stylesheet" href="{%static 'lib/AdminLTE-3.0.2/css/adminlte.min.css'%}">    <!--../dist/css/adminlte.min.css-->

</head>
<body class="hold-transition sidebar-mini">
<div class="wrapper">
  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <!-- Left navbar links -->
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="{% url 'index' %}" class="nav-link  active">Home</a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="{% url 'contact' %}" class="nav-link">Contact</a>
      </li>
    </ul>

    <!-- Right navbar links -->
    <ul class="navbar-nav ml-auto">
      <!-- Navbar Search -->
      <li class="nav-item">
        <a class="nav-link" href="#" role="button">
         Profile</a>
      </li>

      <!-- Messages Dropdown Menu -->
      <!-- Notifications Dropdown Menu -->
    </ul>
  </nav>
  <!-- /.navbar -->

  <!-- Main Sidebar Container -->
  <aside class="main-sidebar sidebar-dark-primary elevation-4">
    <!-- Brand Logo -->
    <a href="#" class="brand-link">
      <img src="{% static 'lib/AdminLTE-3.0.2/img/yt.png' %}" class="brand-image img-circle elevation-3" style="opacity: .8">
      <span class="brand-text font-weight-light">Web Scheduling</span>
    </a>

    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Sidebar user panel (optional) -->
      <div class="user-panel mt-3 pb-3 mb-3 d-flex">
        <div class="image">
          <img src="{% static 'lib/AdminLTE-3.0.2/img/usergeneral.jpg' %}"  class="img-circle elevation-2" alt="User Image">
        </div>
        <div class="info">
          <a href="#" class="d-block">Nombre Apellido</a>
        </div>
      </div>

      <!-- Sidebar Menu -->
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
          <!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->
          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="nav-icon fas fa-plus-square"></i>
              <p>
                Crear Horario
                <i class="right fas fa-angle-left"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">
              <li class="nav-item">
                <a href="{%url 'create_profesor' %}" class="nav-link">
                  <i class="far fa-circle nav-icon"></i>
                  <p>Añadir Profesor</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="{% url 'create_subject' %}" class="nav-link">
                  <i class="far fa-circle nav-icon"></i>
                  <p>Añadir Materia</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="{% url 'create_aula' %}" class="nav-link">
                  <i class="far fa-circle nav-icon"></i>
                  <p>Añadir Aulas</p>
                </a>
              </li>
            </ul>
          </li>
          <li class="nav-item">
            <a href="{% url 'calendar' %}" class="nav-link">
              <i class="nav-icon far fa-calendar-alt"></i>
              <p>
                Modificar
              </p>
            </a>
          </li>   
        </ul>
      </nav>
      <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-12 center">
          <div class="col-md-12 center">
          </div>
        </div>
      </div>
      
    </section>
    <!-- Main content -->
    {% block content %}
    <section class="content";>
      <div class="container-fluid1">
        <div class="row">
          <div class="col-md-5 rounded d-flex align-items-center justify-content-center" style="background-color: rgb(236, 236, 236);margin-left:2%;margin-right: 2%; ">
            <p class="far" style="font-size: x-large;">Web scheduling is basically based on a page that allows you to create, modify and view manually generated schedules.
              In order to use this platform, we must first add the teacher, the subject, and then the corresponding classroom assignment given the subject, time, and day.</p>
          </div>
          <div class="col-md-6 right">
            <img src="{% static 'lib/AdminLTE-3.0.2/img/back-g.jpg' %}" class="rounded" style="width: 100%; height: auto;"><!--../dist/img/back-g.jpg-->
          </div>
        </div>
      </div>
    </section>
    {% endblock %}
  </div>


  <!-- /.content-wrapper -->

  <footer class="main-footer">
    <strong>Copyright &copy; 2023-2024 </strong> All rights reserved.
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->

<!-- jQuery -->
<script src="{% static 'lib/AdminLTE-3.0.2/plugins/jquery/jquery.min.js'%}"></script> <!--../plugins/jquery/jquery.min.js-->
<!-- Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
<script src="{% static 'lib/AdminLTE-3.0.2/plugins/bootstrap/js/bootstrap.bundle.min.js'%}"></script> <!--../plugins/bootstrap/js/bootstrap.bundle.min.js-->
<!-- jQuery UI -->
<script src="{% static 'lib/AdminLTE-3.0.2/plugins/jquery-ui/jquery-ui.min.js' %}"></script> <!--../plugins/jquery-ui/jquery-ui.min.js-->
<!-- AdminLTE App -->
<script src="{% static 'lib/AdminLTE-3.0.2/js/adminlte.min.js'%}"></script><!--../dist/js/adminlte.min.js-->
<!-- fullCalendar 2.2.5 -->
<script src="{% static 'lib/AdminLTE-3.0.2/plugins/moment/moment.min.js' %}"></script> <!--"../plugins/moment/moment.min.js">-->
<script src="{% static 'lib/AdminLTE-3.0.2/plugins/fullcalendar/main.js'%}"></script> <!--../plugins/fullcalendar/main.js-->
<script src="{% static 'lib/AdminLTE-3.0.2/plugins/moment/moment.min.js' %}"></script> <!--"../plugins/moment/moment.min.js">-->
<script src="{% static 'lib/AdminLTE-3.0.2/plugins/moment/moment.min.js' %}"></script> <!--"../plugins/moment/moment.min.js">-->
<script src="{% static 'lib/AdminLTE-3.0.2/plugins/jquery/jquery.min.js' %}" ></script>
<script src="{% static 'lib/datatables-1.10.20/js/jquery.dataTables.min.js'%}" ></script>
<script src="{% static 'lib/datatables-1.10.20/js/dataTables.bootstrap.min.js' %}" ></script>

<!-- AdminLTE for demo purposes -->




<!-- Page specific script -->
 <script>
  $(function () {

    /* initialize the external events
     -----------------------------------------------------------------*/
    function ini_events(ele) {
      ele.each(function () {

        // create an Event Object (https://fullcalendar.io/docs/event-object)
        // it doesn't need to have a start or end
        var eventObject = {
          title: $.trim($(this).text()) // use the element's text as the event title
        }

        // store the Event Object in the DOM element so we can get to it later
        $(this).data('eventObject', eventObject)

        // make the event draggable using jQuery UI
        $(this).draggable({
          zIndex        : 1070,
          revert        : true, // will cause the event to go back to its
          revertDuration: 0  //  original position after the drag
        })

      })
    }

    ini_events($('#external-events div.external-event'))

    /* initialize the calendar
     -----------------------------------------------------------------*/
    //Date for the calendar events (dummy data)
    var date = new Date()
    var d    = date.getDate(),
        m    = date.getMonth(),
        y    = date.getFullYear()

    var Calendar = FullCalendar.Calendar;
    var Draggable = FullCalendar.Draggable;

    var containerEl = document.getElementById('external-events');
    var checkbox = document.getElementById('drop-remove');
    var calendarEl = document.getElementById('calendar');

    // initialize the external events
    // -----------------------------------------------------------------

    new Draggable(containerEl, {
      itemSelector: '.external-event',
      eventData: function(eventEl) {
        return {
          title: eventEl.innerText,
          backgroundColor: window.getComputedStyle( eventEl ,null).getPropertyValue('background-color'),
          borderColor: window.getComputedStyle( eventEl ,null).getPropertyValue('background-color'),
          textColor: window.getComputedStyle( eventEl ,null).getPropertyValue('color'),
        };
      }
    });

    var calendar = new Calendar(calendarEl, {
      headerToolbar: {
        left  : '',
        center: 'title',
        right : '',
      },
      themeSystem: 'bootstrap',
      initialView: 'timeGridWeek', // Mostrar solo una semana
      displayEventTime: true, // Ocultar horas en los eventos
      slotMinTime: '07:00:00', // Establecer la hora de inicio del día a las 7 am
      slotMaxTime: '19:00:00',
      weekends: false, // Ocultar sábado y domingo (solo mostrar lunes a viernes)
      allDaySlot: false,
      //Random default events
      editable  : true,
      droppable : true, // this allows things to be dropped onto the calendar !!ç
      nowIndicator: false,

      drop      : function(info) {
        // is the "remove after drop" checkbox checked?
        if (checkbox.checked) {
          // if so, remove the element from the "Draggable Events" list
          info.draggedEl.parentNode.removeChild(info.draggedEl);
        }
      },
      // Personalizar el encabezado de las columnas para mostrar solo el día de la semana
      viewDidMount: function(arg) {
        var dayNames = ['lunes', 'martes', 'miércoles', 'jueves', 'viernes'];
        var headerCells = document.querySelectorAll('.fc-col-header-cell-cushion');

        headerCells.forEach(function(cell, index) {
          cell.textContent = dayNames[index];
        });
      },
      // Reemplazar el título del calendario por "semestre"
      titleFormat: function() {
        return 'Semestre';
      },
    });

    calendar.render();

    // $('#calendar').fullCalendar()

    /* ADDING EVENTS */
    var currColor = '#3c8dbc' //Red by default
    // Color chooser button
    $('#color-chooser > li > a').click(function (e) {
      e.preventDefault()
      // Save color
      currColor = $(this).css('color')
      // Add color effect to button
      $('#add-new-event').css({
        'background-color': currColor,
        'border-color'    : currColor
      })
    })
    $('#add-new-event').click(function (e) {
      e.preventDefault()
      // Get value and make sure it is not null
      var val = $('#new-event').val()
      if (val.length == 0) {
        return
      }
      // Create events
      var event = $('<div />')
      event.css({
        'background-color': currColor,
        'border-color'    : currColor,
        'color'           : '#de0404'
      }).addClass('external-event')
      event.text(val)
      $('#external-events').prepend(event)

      // Add draggable funtionality
      ini_events(event)

      // Remove event from text input
      $('#new-event').val('')
    })
  })
</script>

</body>
</html>
